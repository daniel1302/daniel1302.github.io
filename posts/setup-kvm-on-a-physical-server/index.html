<!doctype html><html class=no-js lang=en>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="IE=edge">
<title>Setup KVM on a physical server - blog.vallheru.pl</title>
<script>(function(a,b){a[b]=a[b].replace("no-js","js")})(document.documentElement,"className")</script>
<meta name=description content>
<meta property="og:title" content="Setup KVM on a physical server">
<meta property="og:description" content="Setup KVM on a physical server As part of my learning, I will try to explain to you how to install KVM on physical computer and server. That is the first stop on the road to install the OpenStack.
Introduction Assumptions  Do not use GUI* KVM cluster All VM stored on /mapper/red01(Raid5 matrix) Two networks: NAT and Bridge to physical interface As much automation as possible  Note:
* Usually, I work with servers I have no real access.">
<meta property="og:type" content="article">
<meta property="og:url" content="/posts/setup-kvm-on-a-physical-server/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2019-09-26T12:00:00+02:00">
<meta property="article:modified_time" content="2019-09-26T12:00:00+02:00">
<meta itemprop=name content="Setup KVM on a physical server">
<meta itemprop=description content="Setup KVM on a physical server As part of my learning, I will try to explain to you how to install KVM on physical computer and server. That is the first stop on the road to install the OpenStack.
Introduction Assumptions  Do not use GUI* KVM cluster All VM stored on /mapper/red01(Raid5 matrix) Two networks: NAT and Bridge to physical interface As much automation as possible  Note:
* Usually, I work with servers I have no real access."><meta itemprop=datePublished content="2019-09-26T12:00:00+02:00">
<meta itemprop=dateModified content="2019-09-26T12:00:00+02:00">
<meta itemprop=wordCount content="3742">
<meta itemprop=keywords content>
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Setup KVM on a physical server">
<meta name=twitter:description content="Setup KVM on a physical server As part of my learning, I will try to explain to you how to install KVM on physical computer and server. That is the first stop on the road to install the OpenStack.
Introduction Assumptions  Do not use GUI* KVM cluster All VM stored on /mapper/red01(Raid5 matrix) Two networks: NAT and Bridge to physical interface As much automation as possible  Note:
* Usually, I work with servers I have no real access.">
<link rel=preconnect href=https://fonts.gstatic.com crossorigin>
<link rel=dns-prefetch href=//fonts.googleapis.com>
<link rel=dns-prefetch href=//fonts.gstatic.com>
<link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">
<link rel=stylesheet href=/css/style.css>
<link rel=stylesheet href=/css/custom.css>
<link rel="shortcut icon" href=/favicon.ico>
</head>
<body class=body>
<div class="container container--outer">
<header class=header>
<div class="container header__container">
<div class="logo logo--mixed">
<a class=logo__link href=/ title=blog.vallheru.pl rel=home>
<div class="logo__item logo__imagebox">
<img class=logo__img src=/img/placeholder.png>
</div><div class="logo__item logo__text">
<div class=logo__title>blog.vallheru.pl</div>
<div class=logo__tagline>Personal blog</div>
</div>
</a>
</div>
<div class=divider></div>
</div>
</header>
<div class="wrapper flex">
<div class=primary>
<main class=main role=main>
<article class=post>
<header class=post__header>
<h1 class=post__title>Setup KVM on a physical server</h1>
<div class="post__meta meta"><div class="meta__item-author meta__item">
<svg class="meta__icon icon icon-author" width="16" height="16" viewBox="0 0 12 16"><path d="M6 1c2.2.0 3.5 2 3.5 4.5C9.5 7 8.9 8.2 8 9c2.9.8 4 2.5 4 5v1H0v-1c0-2.5 1.1-4.2 4-5-.9-.8-1.5-2-1.5-3.5C2.5 3 3.8 1 6 1z"/></svg><span class=meta__text>daniel1302</span>
</div>
<div class="meta__item-datetime meta__item">
<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2019-09-26T12:00:00+02:00>2019-09-26</time></div></div>
</header>
<div class="post__toc toc">
<div class=toc__title>Page content</div>
<div class=toc__menu>
<nav id=TableOfContents>
<ul>
<li><a href=#introduction>Introduction</a>
<ul>
<li><a href=#assumptions>Assumptions</a></li>
<li><a href=#triggered-topics>Triggered topics</a></li>
<li><a href=#machine-i-run-cluster-on>Machine I run cluster on</a></li>
<li><a href=#naming-conventions>Naming conventions</a></li>
</ul>
</li>
<li><a href=#kvm-instalation>KVM instalation</a></li>
<li><a href=#kvm-configuration>KVM configuration</a>
<ul>
<li><a href=#infrastructure-you-need-to-modify>Infrastructure, you need to modify.</a></li>
<li><a href=#qemu-config>Qemu config</a></li>
<li><a href=#host-bridge-network>Host bridge network</a></li>
<li><a href=#create-storage>Create storage</a></li>
<li><a href=#deploy-first-vm>Deploy first VM</a></li>
<li><a href=#attach-network>Attach network</a></li>
<li><a href=#expand-hdd>Expand HDD</a></li>
</ul>
</li>
</ul>
</nav>
</div>
</div><div class="content post__content clearfix">
<h1 id=setup-kvm-on-a-physical-server>Setup KVM on a physical server</h1>
<p>As part of my learning, I will try to explain to you how to install KVM on physical computer and server. That is the first stop on the road to install the OpenStack.</p>
<h2 id=introduction>Introduction</h2>
<h3 id=assumptions>Assumptions</h3>
<ul>
<li>Do not use GUI*</li>
<li>KVM cluster</li>
<li>All VM stored on /mapper/red01(Raid5 matrix)</li>
<li>Two networks: NAT and Bridge to physical interface</li>
<li>As much automation as possible</li>
</ul>
<p><strong>Note:</strong></p>
<p>* Usually, I work with servers I have no real access. Also, my connection to the internet is slow, so it is not possible to transfer the graphic interface.</p>
<h3 id=triggered-topics>Triggered topics</h3>
<ul>
<li>Ansible</li>
<li>Linux networking</li>
<li>libvirt</li>
</ul>
<h3 id=machine-i-run-cluster-on>Machine I run cluster on</h3>
<ul>
<li>CPU: 2x Intel(R) Xeon(R) CPU E5645 @ 2.40GHz</li>
<li>RAM: 128 GB</li>
<li>HDD:
<ul>
<li>SSD 128GB</li>
<li>HDD RAID1 1TB</li>
<li>HDD RAID5 8TB</li>
<li>HDD RAID5 8TB</li>
</ul>
</li>
</ul>
<h3 id=naming-conventions>Naming conventions</h3>
<p>I follow my convention of naming. I have a few servers called by dragon names like Farnir, Smaug, etc. That name becomes the environment for all running machines and programs. You should find your standards and follow them.
Host name contains following parts:</p>
<pre><code>- Environment name
- Destiny / Use case
- System version (optional)
</code></pre>
<p>An exception is the base image, which is base for all next virtual machines.</p>
<p>Examples:</p>
<ul>
<li>Domain: <code>kvm-smaug</code>, <code>kvm-farnir</code></li>
<li>Host names: <code>smaug-mysql</code>,</li>
</ul>
<h2 id=kvm-instalation>KVM instalation</h2>
<ol>
<li>
<p>Before you start installing the KVM soft, check if your processor has support for virtualization. To check your virtualization capabilities, you need to run the following command: <code>egrep -c '(svm|vmx)' /proc/cpuinfo</code></p>
</li>
<li>
<p>If you can see 0, that means, your computer does not support virtualization. If you can see any number larger than 0, it&rsquo;s valid. If your computer is not supporting virtualization, try to enable it in BIOS settings. To do it restart your computer, find the &ldquo;Virtualization (VT-x/AMD-V)&rdquo; option and turn it on.</p>
</li>
<li>
<p>Now you can verify if your system is correctly set up. To do it run: the <code>kvm-ok</code> command. Correct output is:</p>
<pre><code># kvm-ok
INFO: /dev/kvm exists
KVM acceleration can be used
</code></pre></li>
<li>
<p>Now You can install quemu and all required software. To do it run: <code>apt-get install qemu-kvm libvirt-bin bridge-utils virt-manager</code></p>
</li>
<li>
<p>The KVM uses virtualization extension like Intel VT for Intel processors or AMD-V for AMD processors. Let&rsquo;s see what modules are enabled for you:</p>
<pre><code># lsmod | grep kvm
kvm_intel             212992  34
kvm                   598016  1 kvm_intel
irqbypass              16384  20 kvm
</code></pre></li>
<li>
<p>If your module are disabled, please run <code>modprobe --all kvm</code></p>
</li>
<li>
<p>Verify installation:</p>
<pre><code># virsh list --all

Id Name                 State
----------------------------------
</code></pre></li>
<li>
<p>It&rsquo;s done!</p>
</li>
</ol>
<h2 id=kvm-configuration>KVM configuration</h2>
<h3 id=infrastructure-you-need-to-modify>Infrastructure, you need to modify.</h3>
<pre><code>    /etc/libvirt/
    └── qemu.conf

    /mapper/red01/kvm
    ├── disks/
    └── images/

    /
    ├── kvm-disks -&gt; /mapper/red01/kvm/disks/
    └── kvm-images -&gt; /mapper/red01/kvm/images/

    /var/lib/libvirt/
    └── networks
        └── host-bridge.xml
</code></pre>
<h3 id=qemu-config>Qemu config</h3>
<p>Open the file: /etc/libvirt/qemu.conf and change the following values:</p>
<pre><code>user = &quot;root&quot;
group = &quot;root&quot;

security_driver = &quot;none&quot;
</code></pre><p>First two lines set the qemu user and group to root. The last line disables all security for our cluster. I plan to change it, but for learning purposes, I will leave it as it is now.</p>
<p>Then restart the <code>libvirtd</code> service</p>
<pre><code># service libvirt restart
</code></pre>
<h3 id=host-bridge-network>Host bridge network</h3>
<p>I use <code>Ubuntu Server 18.04.3 LTS</code>, and I am going to prepare creating bridge network for this system.</p>
<h4 id=enable-forwarding>Enable forwarding.</h4>
<p>Open the /etc/sysctl.conf file and uncomment/add following line:</p>
<pre><code>net.ipv4.ip_forward=1
</code></pre><p>Then apply changes with the <code>sudo sysctl -p /etc/sysctl.conf</code> command
Then reload procps with the <code>sudo /etc/init.d/procps restart</code></p>
<h4 id=install-missing-software>Install missing software</h4>
<p>Type following command: <code>sudo apt-get install bridge-utils</code></p>
<h4 id=create-bridge-interface>Create bridge interface</h4>
<p>My physical output interface is <code>eno2</code>. I am going to create a bridge for this interface. Make sure if your name is correct. If you do not have any backup connect and you make a mistake, you can lose the connection to your server.</p>
<p><em>Notes:</em></p>
<ul>
<li>Network: 192.168.0.0/24</li>
<li>Net mask: 255.255.255.0</li>
<li>Gateway: 192.168.0.1</li>
<li>DHCP on the router: enabled</li>
</ul>
<ol>
<li>Open the /etc/netplan/50-cloud-init.yaml and update your physical interface config to similar:</li>
</ol>
<pre><code>eno2:
    addresses: []
    dhcp4: false

</code></pre><ol start=2>
<li>Add bridge configuration:</li>
</ol>
<pre><code>    bridges:
        br0:
            interfaces: [eno2]
            dhcp4: false
            addresses: [192.168.0.100/24]
            gateway4: 192.168.0.1
            nameservers:
                addresses:
                  - 192.168.0.1
                  - 8.8.8.8
</code></pre><p>What is this configuration mean?</p>
<ul>
<li><code>dhcp4: false</code> - With this directive, We disable DHCP for our interfaces. We don&rsquo;t want any IP for the physical interface. We can disable DHCP also for br0 because We assigned the static IP(192.168.0.100).</li>
<li><code>interfaces: [eno2]</code> - Determine which interface do you want to bridge.</li>
<li>Rest of the fields are straightforward</li>
</ul>
<p><em>Note:</em> Remember to replace config with your parameters.</p>
<p>Finally my file looks like below:</p>
<pre><code># This file is generated from information provided by
# the datasource.  Changes to it will not persist across an instance.
# To disable cloud-init's network configuration capabilities, write a file
# /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg with the following:
# network: {config: disabled}
network:
    version: 2
    ethernets:
        eno1:
            addresses: []
            dhcp4: true
        eno2:
            addresses: []
            dhcp4: false
        enp4s0f0:
            addresses: []
            dhcp4: true
            optional: true
        enp4s0f1:
            addresses: []
            dhcp4: true
            optional: true
        enp5s0f0:
            addresses: []
            dhcp4: true
            optional: true
        enp5s0f1:
            addresses: []
            dhcp4: true
            optional: true

    bridges:
        br0:
            interfaces: [eno2]
            dhcp4: false
            addresses: [192.168.0.100/24]
            gateway4: 192.168.0.1
            nameservers:
                addresses:
                  - 192.168.0.1
                  - 8.8.8.8
</code></pre><ol start=3>
<li>Now test and apply your configuration</li>
</ol>
<pre><code>netplan try
netplan apply
</code></pre><ol start=4>
<li>Verify if all works good. You should see 3 interfaces:
Physical interface, should be up without any IP</li>
</ol>
<pre><code>3: eno2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq master br0 state UP group default qlen 1000
    link/ether 78:2b:cb:33:29:3d brd ff:ff:ff:ff:ff:ff
</code></pre><p>Bridge interface shoudl be up with static IP: 192.168.0.100:</p>
<pre><code>94: br0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether 82:43:74:4e:8d:c4 brd ff:ff:ff:ff:ff:ff
    inet 192.168.0.100/24 brd 192.168.0.255 scope global br0
       valid_lft forever preferred_lft forever
    inet6 fe80::8043:74ff:fe4e:8dc4/64 scope link
       valid_lft forever preferred_lft forever
</code></pre><p>And you should be able to see a KVM NAT interface, with some DHCP IP:</p>
<pre><code>111: virbr0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether 52:54:00:43:8d:69 brd ff:ff:ff:ff:ff:ff
    inet 192.168.122.1/24 brd 192.168.122.255 scope global virbr0
       valid_lft forever preferred_lft forever
</code></pre>
<h3 id=create-storage>Create storage</h3>
<h4 id=what-are-kvm-pools>What are KVM pools?</h4>
<p>Today, everybody uses different disks, settings, partitions, file systems, etc.</p>
<p>All storages have pros and cons. Ones provide better control others are faster. For example, an application which is doing some computations and save data on HDD requires a faster drive than DB, which keeps user DB.</p>
<p>KVM pools come against those problems. KVM pool is a mechanism, which helps us manage our drives. For example, We can create one for SSD drives and the second one for HDD drives. Users/administrators that use our infrastructure does not need to know what is under the mask. We can think about that like about a container or like about abstraction layer that isolates physical devices between software.</p>
<p>We have a few types of pool types:</p>
<ul>
<li>dir - uses direcectory as a storage for volumes.</li>
<li>disk - uses physical hard disks as a storage for volumes.</li>
<li>fs - uses preformated partition to store volumes.</li>
<li>lvm - uses LVM volume as a storage driver.</li>
<li>netfs - uses Use network file system(like NFS) to store volumes.</li>
</ul>
<h4 id=lets-start>Let&rsquo;s start&mldr;</h4>
<ol>
<li>Create pool on /mapper/red01/kvm/disks . Let&rsquo;s call it</li>
</ol>
<pre><code>virsh pool-define-as   \
  --name kvm-disks     \
  --type dir          \
  --target /mapper/red01/kvm/disks

virsh pool-build kvm-pool
virsh pool-start kvm-pool
virsh pool-autostart kvm-pool
</code></pre><p>Above commands define pool with the type of dir, called kvm-disks, which points to the /mapper/red01/kvm/disks directory. The next CLI command builds the pool. For the dir type, it is not necessary, but for another(like a disk), it is required to prepare filesystem. Then we start the pool and enable autostart.</p>
<ol start=2>
<li>Verify, your configuration</li>
</ol>
<p>Run the <code>virsh pool-list</code> command:</p>
<pre><code> Name                 State      Autostart
-------------------------------------------
 default              active     yes
 kvm-disks            active     yes
</code></pre><p>Run the <code>virsh pool-dumpxml</code> command:</p>
<pre><code>&lt;pool type='dir'&gt;
  &lt;name&gt;kvm-disks&lt;/name&gt;
  &lt;uuid&gt;4ab0ab6e-5006-4dcf-9fdf-d769946783b5&lt;/uuid&gt;
  &lt;capacity unit='bytes'&gt;7936293720064&lt;/capacity&gt;
  &lt;allocation unit='bytes'&gt;346643271680&lt;/allocation&gt;
  &lt;available unit='bytes'&gt;7589650448384&lt;/available&gt;
  &lt;source&gt;
  &lt;/source&gt;
  &lt;target&gt;
    &lt;path&gt;/mapper/red01/kvm/disks&lt;/path&gt;
    &lt;permissions&gt;
      &lt;mode&gt;0755&lt;/mode&gt;
      &lt;owner&gt;0&lt;/owner&gt;
      &lt;group&gt;0&lt;/group&gt;
    &lt;/permissions&gt;
  &lt;/target&gt;
&lt;/pool&gt;
</code></pre><p>Now we can verify if everything is correct. If not, you can run the <code>virsh pool-edit kvm-disks</code> command.</p>
<h3 id=deploy-first-vm>Deploy first VM</h3>
<p>On the beginning, I will provide the bash command and explain a bit what it does. To create a new VM, I am going to use the virt-install bash command, which comes from virt tools.</p>
<pre><code>virt-install \
  --virt-type=kvm \
  --name debian10-base \
  --ram 8000 \
  --disk pool=kvm-disks,sparse=true,size=20 \
  --vcpus 4 \
  --os-type linux \
  --os-variant debian9 \
  --network network=default \
  --graphics none \
  --console pty,target_type=serial \
  --location 'http://ftp.nl.debian.org/debian/dists/buster/main/installer-amd64/' \
  --extra-args 'console=ttyS0,115200n8 serial'
</code></pre><p>Command has a lot of parameters. You can read more here: <a href=https://linux.die.net/man/1/virt-install>https://linux.die.net/man/1/virt-install</a>.</p>
<ul>
<li><code>virt-type</code> - The hypervisor to install on. We are using KVM so, choice is clear.</li>
<li><code>name</code> - Name of our VM</li>
<li><code>ram</code> - Ram allocation for our VM</li>
<li><code>disk</code> - Configure disk.</li>
<li><code>vcpus</code> - Number of virtual CPUs allocated for VM</li>
<li><code>os-type</code> - Type of virtualized system</li>
<li><code>os-varian</code> - Variant of selected OS, used for futher optimizazations. For now libvirt does not support Debian 10.</li>
<li><code>network</code> - Network settings*</li>
<li><code>graphics</code> - Settings of graphics interface. We do not need graphics support for now, so disable it</li>
<li><code>console</code> - Connect VMs console to pty, with type serial. Serial is configured in <code>extra-args</code></li>
<li><code>location</code> - Location of installation disk. For more disks see below.</li>
</ul>
<p>You can notice, I used only one network. Moreover, this is the default network. It&rsquo;s a good catch, but It is aware because I want to show you <strong>How to attach network interface and set up it in the guest OS</strong>.</p>
<p>Ok, let&rsquo;s type above command and install your OS. My installation parameters:</p>
<h4 id=install-system>Install system</h4>
<ul>
<li>Language: <code>English</code></li>
<li>Location: <code>Poland</code></li>
<li>Locales: <code>United States - en_US.UTF-8</code></li>
<li>Keyboard: <code>American English</code></li>
<li>Hostname: <code>debian10-base</code></li>
<li>Domain name: <code>kvm-smaug</code></li>
<li>Username for your account: <code>kvm</code></li>
</ul>
<p>Disk partitions:</p>
<ul>
<li>ext4, size: 10GB, mount point: /</li>
<li>ext4, size: 10GB, mount point: /home</li>
</ul>
<p>Software to install</p>
<ul>
<li>SSH Server</li>
<li>standard system utilities</li>
</ul>
<p>Install GRUB in /dev/vda.</p>
<h4 id=verify-installation>Verify installation</h4>
<ol>
<li>Log in as root (or kvm).</li>
<li>Type <code>ip a</code> to see your IP. In my example, I can see my IP address is <code>192.168.122.100</code>. That IP belongs to default networks. Make a note this address.</li>
</ol>
<pre><code>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
2: ens2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 52:54:00:f9:5f:ec brd ff:ff:ff:ff:ff:ff
    inet 192.168.122.100/24 brd 192.168.122.255 scope global dynamic ens2
       valid_lft 3209sec preferred_lft 3209sec
    inet6 fe80::5054:ff:fef9:5fec/64 scope link
       valid_lft forever preferred_lft forever
</code></pre><ol start=3>
<li>Verify if your SSH server is running. Type <code>systemctl status sshd</code></li>
</ol>
<pre><code>ssh.service - OpenBSD Secure Shell server
   Loaded: loaded (/lib/systemd/system/ssh.service; enabled; vendor preset: enab
   Active: active (running) since Tue 2019-08-13 14:49:52 CEST; 8min ago
     Docs: man:sshd(8)
           man:sshd_config(5)
  Process: 387 ExecStartPre=/usr/sbin/sshd -t (code=exited, status=0/SUCCESS)
 Main PID: 395 (sshd)
    Tasks: 1 (limit: 4915)
   Memory: 3.7M
           └─395 /usr/sbin/sshd -D

Aug 13 14:49:52 debian10-base systemd[1]: Starting OpenBSD Secure Shell server..
Aug 13 14:49:52 debian10-base sshd[395]: Server listening on 0.0.0.0 port 22.
Aug 13 14:49:52 debian10-base sshd[395]: Server listening on :: port 22.
Aug 13 14:49:52 debian10-base systemd[1]: Started OpenBSD Secure Shell server.
</code></pre><ol start=4>
<li>
<p>Reboot VM to see if everything is working as expected. To do that run <code>systemctl reboot</code>.</p>
</li>
<li>
<p>Detach console by typing: <code>CRTL + ^</code>. It did not work for me, so I closed the terminal.</p>
</li>
<li>
<p>Try to connect to your VM from the host computer.</p>
</li>
</ol>
<pre><code>ssh kvm@192.168.122.100
</code></pre><ol start=7>
<li>If everything is working, you did a great job!</li>
</ol>
<h4 id=installation-images>Installation images:</h4>
<table>
<thead>
<tr>
<th>Distro name</th>
<th>OS variant</th>
<th>URL</th>
</tr>
</thead>
<tbody>
<tr>
<td>Debian 10</td>
<td>debian9</td>
<td><a href=http://ftp.nl.debian.org/debian/dists/buster/main/installer-amd64/>http://ftp.nl.debian.org/debian/dists/buster/main/installer-amd64/</a></td>
</tr>
<tr>
<td>Debian 9</td>
<td>debian9</td>
<td><a href=http://ftp.nl.debian.org/debian/dists/stretch/main/installer-amd64/>http://ftp.nl.debian.org/debian/dists/stretch/main/installer-amd64/</a></td>
</tr>
<tr>
<td>Debian 8</td>
<td>debian8</td>
<td><a href=http://ftp.nl.debian.org/debian/dists/jessie/main/installer-amd64/>http://ftp.nl.debian.org/debian/dists/jessie/main/installer-amd64/</a></td>
</tr>
<tr>
<td>Debian 7</td>
<td>debian7</td>
<td><a href=http://ftp.nl.debian.org/debian/dists/wheezy/main/installer-amd64/>http://ftp.nl.debian.org/debian/dists/wheezy/main/installer-amd64/</a></td>
</tr>
<tr>
<td>Debian 6</td>
<td>debian6</td>
<td><a href=http://ftp.nl.debian.org/debian/dists/squeeze/main/installer-amd64/>http://ftp.nl.debian.org/debian/dists/squeeze/main/installer-amd64/</a></td>
</tr>
<tr>
<td>CentOS 7</td>
<td>centos7</td>
<td><a href=http://mirror.i3d.net/pub/centos/7/os/x86_64/>http://mirror.i3d.net/pub/centos/7/os/x86_64/</a></td>
</tr>
<tr>
<td>CentOS 6</td>
<td>centos6</td>
<td><a href=http://mirror.i3d.net/pub/centos/6/os/x86_64/>http://mirror.i3d.net/pub/centos/6/os/x86_64/</a></td>
</tr>
<tr>
<td>CentOS 5</td>
<td>centos5</td>
<td><a href=http://mirror.i3d.net/pub/centos/5/os/x86_64/>http://mirror.i3d.net/pub/centos/5/os/x86_64/</a></td>
</tr>
<tr>
<td>Ubuntu 18.04</td>
<td>linux</td>
<td><a href=http://archive.ubuntu.com/ubuntu/dists/bionic/main/installer-amd64/>http://archive.ubuntu.com/ubuntu/dists/bionic/main/installer-amd64/</a></td>
</tr>
<tr>
<td>Ubuntu 16.04</td>
<td>linux</td>
<td><a href=http://archive.ubuntu.com/ubuntu/dists/xenial/main/installer-amd64/>http://archive.ubuntu.com/ubuntu/dists/xenial/main/installer-amd64/</a></td>
</tr>
<tr>
<td>Ubuntu 14.04</td>
<td>linux</td>
<td><a href=http://archive.ubuntu.com/ubuntu/dists/trusty/main/installer-amd64/>http://archive.ubuntu.com/ubuntu/dists/trusty/main/installer-amd64/</a></td>
</tr>
<tr>
<td>Ubuntu 12.04</td>
<td>linux</td>
<td><a href=http://archive.ubuntu.com/ubuntu/dists/precise/main/installer-amd64/>http://archive.ubuntu.com/ubuntu/dists/precise/main/installer-amd64/</a></td>
</tr>
<tr>
<td>Ubuntu 10.04</td>
<td>linux</td>
<td><a href=http://archive.ubuntu.com/ubuntu/dists/lucid/main/installer-amd64/>http://archive.ubuntu.com/ubuntu/dists/lucid/main/installer-amd64/</a></td>
</tr>
<tr>
<td>OpenSUSE 13</td>
<td>linux</td>
<td><a href=http://download.opensuse.org/distribution/13.2/repo/oss/>http://download.opensuse.org/distribution/13.2/repo/oss/</a></td>
</tr>
<tr>
<td>OpenSUSE 12</td>
<td>linux</td>
<td><a href=http://download.opensuse.org/distribution/12.3/repo/oss/>http://download.opensuse.org/distribution/12.3/repo/oss/</a></td>
</tr>
<tr>
<td>OpenSUSE 11</td>
<td>linux</td>
<td><a href=http://download.opensuse.org/distribution/11.4/repo/oss/>http://download.opensuse.org/distribution/11.4/repo/oss/</a></td>
</tr>
</tbody>
</table>
<h3 id=attach-network>Attach network</h3>
<p>On the beginning, let&rsquo;s list all our networks on the KVM node. Execute the following command: <code>virsh net-list</code>.</p>
<pre><code>virsh net-list

 Name                 State      Autostart     Persistent
----------------------------------------------------------
 default              active     yes           yes
</code></pre><p>We can notice only the default network is available. Let&rsquo;s create a new one then.</p>
<p>cat /var/lib/libvirt/networks/host-bridge.xml</p>
<ol>
<li>
<p>Create a new network file in the <code>/var/lib/libvirt/networks/host-bridge.xml</code>
File content:</p>
<pre><code>&lt;network&gt;
&lt;name&gt;host-bridge&lt;/name&gt;
&lt;forward mode=&quot;bridge&quot;/&gt;
&lt;bridge name=&quot;br0&quot;/&gt;
&lt;/network&gt;
</code></pre></li>
<li>
<p>Create a network based on the XML file. Execute the following commands:</p>
<pre><code># virsh net-define /var/lib/libvirt/networks/host-bridge.xml
# virsh net-start host-bridge
# virsh net-autostart host-bridge
</code></pre><p>Example:</p>
<pre><code># virsh net-define /var/lib/libvirt/networks/host-bridge.xml
Network host-bridge-1 defined from /var/lib/libvirt/networks/host-bridge.xml

# virsh net-list --all
Name                 State      Autostart     Persistent
----------------------------------------------------------
default              active     yes           yes
host-bridge          inactive   no            yes

# virsh net-start host-bridge
Network host-bridge started

# virsh net-list
Name                 State      Autostart     Persistent
----------------------------------------------------------
default              active     yes           yes
host-bridge          active     no            yes

# virsh net-autostart host-bridge
Network host-bridge marked as autostarted

# virsh net-list
Name                 State      Autostart     Persistent
----------------------------------------------------------
default              active     yes           yes
host-bridge          active     yes           yes
</code></pre></li>
<li>
<p>I assume you have got VM called <code>debian10-base</code>. Let&rsquo;s find it.</p>
<pre><code># virsh list
Id    Name                           State
----------------------------------------------------
41    debian10-base                  running
</code></pre></li>
<li>
<p>SSH into VM:</p>
<pre><code>virsh console debian10-base
</code></pre></li>
<li>
<p>See current network settings.</p>
<pre><code># ip a
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
    valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
    valid_lft forever preferred_lft forever
2: ens2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 52:54:00:f9:5f:ec brd ff:ff:ff:ff:ff:ff
    inet 192.168.122.100/24 brd 192.168.122.255 scope global dynamic ens2
    valid_lft 3583sec preferred_lft 3583sec
    inet6 fe80::5054:ff:fef9:5fec/64 scope link
    valid_lft forever preferred_lft forever
</code></pre></li>
<li>
<p>Type <code>CTRL + ]</code> to exit from the attached console.</p>
</li>
<li>
<p>Generate random MAC address.</p>
<pre><code># openssl rand -hex 6 | sed 's/\(..\)/\1:/g; s/:$//'
52:54:00:4b:73:5f
</code></pre></li>
<li>
<p>Attach interface with the following command:</p>
<pre><code># virsh attach-interface    \
    --domain debian10-base  \
    --type network          \
    --source host-bridge    \
    --model virtio          \
    --mac 52:54:00:4b:73:5f \
    --config                \
    --live
</code></pre></li>
<li>
<p>Disable netfilter on the bridge. This is required to disable filtering packages by our KVM host for bridged interfaces.</p>
<pre><code># cat &gt;&gt; /etc/sysctl.conf &lt;&lt;EOF
net.bridge.bridge-nf-call-ip6tables = 0
net.bridge.bridge-nf-call-iptables = 0
net.bridge.bridge-nf-call-arptables = 0
EOF
# sysctl -p /etc/sysctl.conf
</code></pre></li>
<li>
<p>It&rsquo;s good time to restart our VM</p>
<pre><code># virsh reboot debian10-base
Domain debian10-base is being rebooted
</code></pre></li>
<li>
<p>SSH into VM with <code>virsh console debian10-base</code>. Then see available networks:</p>
<pre><code># ip a

1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
    valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
    valid_lft forever preferred_lft forever
2: ens2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 52:54:00:f9:5f:ec brd ff:ff:ff:ff:ff:ff
    inet 192.168.122.100/24 brd 192.168.122.255 scope global dynamic ens2
    valid_lft 3583sec preferred_lft 3583sec
    inet6 fe80::5054:ff:fef9:5fec/64 scope link
    valid_lft forever preferred_lft forever
3: ens9: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN group default qlen 1000
    link/ether 52:54:00:4b:73:5f brd ff:ff:ff:ff:ff:ff
</code></pre></li>
<li>
<p>We can see our MAC addres: <code>52:54:00:4b:73:5f</code>. Now lets UP the interface</p>
<pre><code># ip link set dev ens9 up
</code></pre></li>
<li>
<p>See if the interface is up</p>
<pre><code># ip a

3: ens9: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
link/ether 52:54:00:4b:73:5f brd ff:ff:ff:ff:ff:ff
inet6 fe80::5054:ff:fe4b:735f/64 scope link
   valid_lft forever preferred_lft forever

</code></pre></li>
<li>
<p>Obtain new IP from DHCP server with <code>/usr/sbin/dhclient &lt;interface name></code></p>
<pre><code># /usr/sbin/dhclient ens9
</code></pre></li>
<li>
<p>That&rsquo;s it! You should be able to see what is your IP:</p>
<pre><code># ip a

1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
    valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
    valid_lft forever preferred_lft forever
2: ens2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 52:54:00:f9:5f:ec brd ff:ff:ff:ff:ff:ff
    inet 192.168.122.100/24 brd 192.168.122.255 scope global dynamic ens2
    valid_lft 2480sec preferred_lft 2480sec
    inet6 fe80::5054:ff:fef9:5fec/64 scope link
    valid_lft forever preferred_lft forever
3: ens9: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 52:54:00:4b:73:5f brd ff:ff:ff:ff:ff:ff
    inet 192.168.0.71/24 brd 192.168.0.255 scope global dynamic ens9
    valid_lft 692448sec preferred_lft 692448sec
    inet6 fe80::5054:ff:fe4b:735f/64 scope link
    valid_lft forever preferred_lft forever

</code></pre></li>
</ol>
<h3 id=expand-hdd>Expand HDD</h3>
<h4 id=quick-about-the-volume-format>Quick about the volume format:</h4>
<p>Different people prefer to use a different type of volumes.</p>
<p><em>Raw</em> format is the most universal and portable. You can export raw disks into another Virtualization format. Another advantage of that format is high performance.</p>
<p>The <em>qcow</em> format provides several like features: snapshots, compressions, backups, etc.</p>
<p>At the moment, it&rsquo;s not important what kind of format you choose.</p>
<h4 id=scenario-1-attach-new-disk-and-map-to-specific-location-varlibmysql>Scenario 1: Attach new disk and map to specific location (/var/lib/mysql)</h4>
<p>Like You remember We use the &ldquo;kvm-pool&rdquo; pool as a volumes storage.</p>
<ol>
<li>
<p>Let&rsquo;s check our volumes pool.</p>
<pre><code># virsh pool-dumpxml kvm-disks
&lt;pool type='dir'&gt;
    &lt;name&gt;kvm-disks&lt;/name&gt;
    &lt;uuid&gt;4ab0ab6e-5006-4dcf-9fdf-d769946783b5&lt;/uuid&gt;
    &lt;capacity unit='bytes'&gt;7936293720064&lt;/capacity&gt;
    &lt;allocation unit='bytes'&gt;348723073024&lt;/allocation&gt;
    &lt;available unit='bytes'&gt;7587570647040&lt;/available&gt;
    &lt;source&gt;
    &lt;/source&gt;
    &lt;target&gt;
        &lt;path&gt;/mapper/red01/kvm/disks&lt;/path&gt;
        &lt;permissions&gt;
        &lt;mode&gt;0755&lt;/mode&gt;
        &lt;owner&gt;0&lt;/owner&gt;
        &lt;group&gt;0&lt;/group&gt;
        &lt;/permissions&gt;
    &lt;/target&gt;
&lt;/pool&gt;
</code></pre></li>
<li>
<p>Go to the folder where pool is defined: <code>/mapper/red01/kvm/disks</code></p>
</li>
<li>
<p>Let&rsquo;s create new <code>10G</code> disk:</p>
<pre><code># cd /mapper/red01/kvm/disks
# qemu-img create -f raw test-disk-10G 10G
Formatting 'test-disk-10G', fmt=raw size=10737418240
</code></pre><p>You can also use dd command:</p>
<pre><code># dd if=/dev/zero of=test-disk-2-10G bs=1M count=10240 status=progress
10078912512 bytes (10 GB, 9.4 GiB) copied, 9 s, 1.1 GB/s
10240+0 records in
10240+0 records out
10737418240 bytes (11 GB, 10 GiB) copied, 9.54978 s, 1.1 GB/s
</code></pre><pre><code># sudo ls -lh
total 15G
-rw------- 1 root root  21G Sep 24 12:30 debian10-base.qcow2
-rw------- 1 root root 8.1G Aug 13 09:55 debian9.qcow2
-rw-r--r-- 1 root root  10G Sep 24 12:27 test-disk-10G
-rw-r--r-- 1 root root  10G Sep 24 12:30 test-disk-2-10G
</code></pre></li>
<li>
<p>I am going to attach this image to the <code>debian10-base</code> VM. Let&rsquo;s log into that instance.</p>
<pre><code># virsh console debian10-base
Connected to domain debian10-base
Escape character is ^]

root@debian10-base:~#
</code></pre></li>
<li>
<p>Find currently attached disks</p>
<pre><code>root@debian10-base:~# ls -als /dev | grep -e vd.$
0 brw-rw----  1 root disk    254,   0 Sep 10 12:39 vda
</code></pre><p>Here You can see that currently attached is disk /dev/vda</p>
</li>
<li>
<p>We can attach our disk as vdb device. Let&rsquo;s do this! Log out from the guest VM, then attach created volume.</p>
<pre><code># virsh attach-disk debian10-base \
    --source /mapper/red01/kvm/disks/test-disk-10G \
    --target vdb \
    --persistent

Disk attached successfully
</code></pre></li>
<li>
<p>Login to the guest VM and verify.</p>
<pre><code>root@debian10-base:~# fdisk -l | grep '^Disk /dev/vd[a-z]'
Disk /dev/vda: 20 GiB, 21474836480 bytes, 41943040 sectors
Disk /dev/vdb: 10 GiB, 10737418240 bytes, 20971520 sectors
</code></pre></li>
<li>
<p>Create a new partition</p>
<pre><code>root@debian10-base:~# fdisk /dev/vdb

Welcome to fdisk (util-linux 2.33.1).
Changes will remain in memory only, until you decide to write them.
Be careful before using the write command.

Device does not contain a recognized partition table.
Created a new DOS disklabel with disk identifier 0xa0b8bd13.

Command (m for help): n
Partition type
p   primary (0 primary, 0 extended, 4 free)
e   extended (container for logical partitions)
Select (default p): p
Partition number (1-4, default 1):
First sector (2048-20971519, default 2048):
Last sector, +/-sectors or +/-size{K,M,G,T,P} (2048-20971519, default 20971519):

Created a new partition 1 of type 'Linux' and of size 10 GiB.

Command (m for help): w
The partition table has been altered.
Calling ioctl() to re-read partition table.
Syncing disks.
</code></pre></li>
<li>
<p>Verify partitions</p>
<pre><code>root@debian10-base:~# lsblk
NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
vda    254:0    0   20G  0 disk
├─vda1 254:1    0  9.3G  0 part /
└─vda2 254:2    0 10.7G  0 part /home
vdb    254:16   0   10G  0 disk
└─vdb1 254:17   0   10G  0 part
</code></pre></li>
<li>
<p>Format created partition</p>
<pre><code>root@debian10-base:~# mkfs.ext4 /dev/vdb1
mke2fs 1.44.5 (15-Dec-2018)
Creating filesystem with 2621184 4k blocks and 655360 inodes
Filesystem UUID: 659eed8b-c913-45ad-a2a6-79c499e338a2
Superblock backups stored on blocks:
        32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632

Allocating group tables: done
Writing inode tables: done
Creating journal (16384 blocks): done
Writing superblocks and filesystem accounting information: done

</code></pre></li>
<li>
<p>Mount partition to the <code>/var/lib/mysql</code></p>
<pre><code>root@debian10-base:~#mount /dev/vdb1 /var/lib/mysql

root@debian10-base:~# mount | grep vdb1
/dev/vdb1 on /var/lib/mysql type ext4 (rw,relatime)
</code></pre></li>
<li>
<p>Add a fstab entry</p>
<pre><code>root@debian10-base:~# echo '/dev/vdb1    /var/lib/mysql    ext4    defaults    0  0' &gt; /etc/fstab
root@debian10-base:~# tail -n 1 /etc/fstab
/dev/vdb1    /var/lib/mysql    ext4    defaults    0  0
</code></pre></li>
</ol>
<h4 id=scenario-2-expand-the-attached-volume>Scenario 2: Expand the attached volume</h4>
<ol>
<li>
<p>Before We start let&rsquo;s check current file system size for particular guest</p>
<pre><code>root@debian10-base:~# df -h
Filesystem      Size  Used Avail Use% Mounted on
udev            3.8G     0  3.8G   0% /dev
tmpfs           779M   77M  703M  10% /run
/dev/vda1       9.2G  1.1G  7.7G  12% /
tmpfs           3.9G     0  3.9G   0% /dev/shm
tmpfs           5.0M     0  5.0M   0% /run/lock
tmpfs           3.9G     0  3.9G   0% /sys/fs/cgroup
/dev/vda2        11G   41M  9.9G   1% /home
tmpfs           779M     0  779M   0% /run/user/0
/dev/vdb1       9.8G   37M  9.3G   1% /var/lib/mysql
</code></pre></li>
<li>
<p>Shutdown the guest VM</p>
<pre><code>root@debian10-base:~# shutdown -P now
</code></pre></li>
<li>
<p>On the host machine resize the disk file</p>
<pre><code># sudo qemu-img resize -f raw ./test-disk-10G +25G
Image resized.
</code></pre></li>
<li>
<p>Start guest VM</p>
<pre><code># virsh start  debian10-base
Domain debian10-base started
</code></pre></li>
<li>
<p>Login into guest VM, and verify filesystem</p>
<pre><code># virsh console debian10-base

root@debian10-base:~# df -h
Filesystem      Size  Used Avail Use% Mounted on
udev            3.8G     0  3.8G   0% /dev
tmpfs           779M  8.4M  771M   2% /run
/dev/vda1       9.2G  1.1G  7.7G  12% /
tmpfs           3.9G     0  3.9G   0% /dev/shm
tmpfs           5.0M     0  5.0M   0% /run/lock
tmpfs           3.9G     0  3.9G   0% /sys/fs/cgroup
/dev/vdb1       9.8G   37M  9.3G   1% /var/lib/mysql
tmpfs           779M     0  779M   0% /run/user/0

root@debian10-base:~# lsblk
NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
vda    254:0    0   20G  0 disk
├─vda1 254:1    0  9.3G  0 part /
└─vda2 254:2    0 10.7G  0 part
vdb    254:16   0   35G  0 disk
└─vdb1 254:17   0   10G  0 part /var/lib/mysql
</code></pre><p>As You can see disk size is 35G, but used is only 10. Let&rsquo;s change it.</p>
</li>
<li>
<p>Modify partition</p>
<pre><code>root@debian10-base:~# fdisk /dev/vdb1
Command (m for help): p
Disk /dev/vdb: 35 GiB, 37580963840 bytes, 73400320 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0xa0b8bd13

Device     Boot Start      End  Sectors Size Id Type
/dev/vdb1        2048 20971519 20969472  10G 83 Linux

Command (m for help): d
Selected partition 1
Partition 1 has been deleted.

Command (m for help): p
Disk /dev/vdb: 35 GiB, 37580963840 bytes, 73400320 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0xa0b8bd13

Command (m for help): n
Partition type
p   primary (0 primary, 0 extended, 4 free)
e   extended (container for logical partitions)
Select (default p): p
Partition number (1-4, default 1):
First sector (2048-73400319, default 2048):
Last sector, +/-sectors or +/-size{K,M,G,T,P} (2048-73400319, default 73400319):

Created a new partition 1 of type 'Linux' and of size 35 GiB.
Partition #1 contains a ext4 signature.

Do you want to remove the signature? [Y]es/[N]o: N

Command (m for help): w

The partition table has been altered.
Syncing disks.
</code></pre><p>Commands:</p>
<ul>
<li>p - Print partition table</li>
<li>d - Delete partition</li>
<li>n - Create new partition</li>
<li>w - Write changes</li>
</ul>
</li>
<li>
<p>Resize current mount point</p>
<pre><code>root@debian10-base:~# resize2fs /dev/vdb1
</code></pre></li>
<li>
<p>Reboot your guest VM, then verify results</p>
<pre><code>root@debian10-base:~# reboot

root@debian10-base:~# df -h
Filesystem      Size  Used Avail Use% Mounted on
udev            3.8G     0  3.8G   0% /dev
tmpfs           779M  8.4M  771M   2% /run
/dev/vda1       9.2G  1.1G  7.7G  12% /
tmpfs           3.9G     0  3.9G   0% /dev/shm
tmpfs           5.0M     0  5.0M   0% /run/lock
tmpfs           3.9G     0  3.9G   0% /sys/fs/cgroup
/dev/vdb1        35G   48M   33G   1% /var/lib/mysql
tmpfs           779M     0  779M   0% /run/user/0
</code></pre></li>
</ol>
</div>
</article>
</main>
<div class="authorbox clearfix">
<figure class=authorbox__avatar>
<img alt="daniel1302 avatar" src=/img/avatar.png class=avatar height=90 width=90>
</figure>
<div class=authorbox__header>
<span class=authorbox__name>About daniel1302</span>
</div>
<div class=authorbox__description>
Devops with AWS and golang
</div>
</div>
<nav class="pager flex">
<div class="pager__item pager__item--prev">
<a class=pager__link href=/posts/what-are-exceptions/ rel=prev>
<span class=pager__subtitle>«&#8201;Previous</span>
<p class=pager__title>[PL] What are exceptions</p>
</a>
</div>
<div class="pager__item pager__item--next">
<a class=pager__link href=/posts/aws-url-helper/ rel=next>
<span class=pager__subtitle>Next&#8201;»</span>
<p class=pager__title>Generate URL for Cloudwatch metrics from your code</p>
</a>
</div>
</nav>
<section class=comments>
<div id=disqus_thread></div>
<script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//Disqus.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script>
<noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
<a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a>
</section>
</div>
</div>
<footer class=footer>
<div class="container footer__container flex">
<div class=footer__copyright>
&copy; 2021 John Doe.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span>
</div>
</div>
</footer>
</div>
<script async defer src=/js/menu.js></script>
<script src=/js/custom.js></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>
</body>
</html>